# Ailly's English Vocabook — 요구사항

## 1. 개요
사진, PDF, DOC, HWP 등 다양한 문서에서 영어단어와 한글뜻을 추출하여
Word 파일(단어장 / 단어시험장)로 생성하는 웹 애플리케이션

---

## 2. 입력 소스 (Tab Widget)

| 탭 | 포맷 | 처리 방식 |
|----|------|-----------|
| 사진 | JPG, PNG, WEBP 등 | OpenAI GPT-4o Vision API |
| PDF | .pdf | pdf.js로 텍스트 추출 → GPT 파싱 |
| DOC/DOCX | .doc, .docx | mammoth.js로 텍스트 추출 → GPT 파싱 |
| HWP | .hwp, .hwpx | hwp.js (제한적 지원) |

- UI는 Tab Widget 방식으로 입력 소스 전환
- 각 탭에서 추출된 단어는 하나의 단어 목록에 누적

---

## 3. 입력 데이터 형식

- 사진에는 영어단어와 한글뜻이 표 형식으로 구성되어 있음
- 품사 표기(명, 동, 형, 부 등)가 있는 경우도 있고 없는 경우도 있음
- 예시: `명) 기억력 | memory` / `benefit | 이익`
- 파싱 시 영어 → 영어 열, 한글뜻 → 한글 열에 매핑

---

## 4. 단어 목록 관리

- 추출된 단어는 편집 가능한 테이블로 표시
- 단어 추가 / 삭제 / 수정 가능
- 여러 소스에서 누적 추가 가능

---

## 5. 출력 - 단어장 (영어단어장)

- **템플릿**: `영어단어장.docx` 파일을 기준 템플릿으로 사용
- 단어 개수가 늘어나도 템플릿 틀(레이아웃, 스타일)은 유지
- 영어단어와 한글뜻만 테이블 셀에 채움
- 텍스트가 길어도 **한 줄**로 표시되도록 폰트 크기 자동 축소

---

## 6. 출력 - 단어시험장

- 단어장과 **동일한 템플릿** 사용
- 레이아웃 구조 (사진 기준):

| 구분 | 한글뜻 열 | 영어단어 열 | 빈칸 열 |
|------|-----------|-------------|---------|
| **왼쪽 세트** (1~3열) | ✅ 표시 | ❌ 비움 (빈칸) | 빈칸 |
| **오른쪽 세트** (4~6열) | ❌ 비움 (빈칸) | ✅ 표시 | 빈칸 |

- 왼쪽: 한글뜻 보고 영어 쓰기 연습
- 오른쪽: 영어 보고 한글뜻 쓰기 연습

---

## 7. 텍스트 자동 크기 조절

- 영어 또는 한글이 셀 너비 기준 너무 길 경우
- 폰트 크기를 자동으로 축소하여 **한 줄** 유지
- 최소 폰트 크기 제한 설정 (예: 6pt)

---

## 8. 기술 스택

- **프론트엔드**: 순수 HTML / CSS / JavaScript (단일 파일)
- **AI**: OpenAI GPT-4o (Vision API) - API 키 사용자 입력
- **라이브러리** (CDN):
  - `docx.js` - Word 파일 생성
  - `docxtemplater` + `pizzip` - 템플릿 기반 .docx 생성
  - `pdf.js` - PDF 텍스트 추출
  - `mammoth.js` - DOCX 텍스트 추출
  - `hwp.js` - HWP 파싱 (제한적)

---

## 9. 템플릿 컬럼 구조 (사진 확인 기준)

단어장 결과물 사진 기준 Word 템플릿 컬럼 순서:

| 왼쪽 세트 | | | 오른쪽 세트 | | |
|-----------|--|--|------------|--|--|
| `{left_english}` | `{left_korean}` | (빈칸) | `{right_english}` | `{right_korean}` | (빈칸) |

- 단어장: 4개 placeholder 모두 채움
- 시험장: `left_english`=빈칸, `left_korean`=표시 / `right_english`=표시, `right_korean`=빈칸
- 반복 태그: `{#pairs}` ... `{/pairs}` (데이터 행 전체에 적용)

---

## 10. 배포 환경

- **플랫폼**: Render (Static Site)
- **성능 최적화**:
  - pdf.js, mammoth.js는 해당 탭 첫 클릭 시 CDN에서 lazy load
  - pizzip, docxtemplater는 즉시 로드 (출력에 항상 필요)
  - Render 헤더에 Cache-Control 설정
- **배포 파일**: `render.yaml` 포함

---

## 11. 확장성 고려사항

- 입력 포맷은 탭 방식으로 추후 추가 가능
- 출력 포맷(단어장/시험장)은 버튼 방식으로 분리
- 템플릿 파일은 사용자가 업로드하는 방식으로 교체 가능
- 단일 HTML 파일로 Render Static Site 배포 가능
